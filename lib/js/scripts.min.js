var scrollTime=500;var fadeTime=300;var _currentUrl=location.href;var _baseUrl=location.protocol+"//"+location.host+$_ROOT;function changeUrl(a){if(typeof(history.pushState)!="undefined"){var b={Title:"title",Url:a};history.pushState(b,b.Title,b.Url)}gtag("config","UA-127422419-1",{page_path:a})}var initialURL=location.href,initialHost=location.host;window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",function(){$("#main").stop().animate({opacity:0},fadeTime,function(){$.get(location.href,function(a){$("#main").html(a).animate({opacity:1},fadeTime);initContent($("#main > .page")[0])})})})},0)});function adjustPageApproche(){$(".page-approche .block_bg").css("margin-left",$(".page-approche .img img").width()/2+"px");alert($(".page-approche .img img").width()/2+"px")}function loadPages(){var c=$("#main > .page[data-url]").data("url");if(!c){return false}var b=$("#main > .page[data-url]");var a=$("#main_menu li a[data-url]").index($('#main_menu li a[data-url="'+c+'"]')[0])+1;b.addClass("order-"+a);$("#main_menu li a[data-url]").each(function(d,e){if($(e).data("url")!=c){$.get($(e).data("url"),function(g){var f=$(g);f.addClass("order-"+(d+1));$("#main").append(f);window.scrollTo(0,b.position().top);initContent(f[0])})}})}function initContent(a){$(".fancyboxgallery",a).fancybox();$(".owl-carousel",a).each(function(e){var d=$(this).is("[data-autoplay]")?true:false;var c=$(this).is("[data-index]")?$(this).data("index"):0;var f=$(this).is("[data-noloop]")?false:true;var b=$(this).is("[data-nonav]")?false:true;$(this).owlCarousel({items:1,autoplay:d,autoplayTimeout:5000,dots:false,autoplayHoverPause:true,mouseDrag:false,touchDrag:true,startPosition:c,loop:f,nav:b,navText:["<span></span>","<span></span>"],theme:""});$(this).on("to.owl.carousel",function(g){g.stopPropagation()})});$(".scrollbar",a).scrollbar({onScroll:function(c,b){if($("#container_tochange").get().length&&!$("#container_tochange").hasClass("changing")&&$(".list_biens_page a").attr("href")!==""){if(c.scroll>=c.maxScroll-$("#all_biens .bien-item:last").height()){$("#container_tochange").addClass("changing");$.get($(".list_biens_page a").attr("href"),function(f){var e=$(f);var d=$("#all_biens .list-biens",e).html();$(d).hide().appendTo($("#all_biens .list-biens")).fadeIn(3000);changeUrl($(".list_biens_page a").attr("href"));$("#container_tochange").html($(".page_bottom",e).html());$("#container_tochange").removeClass("changing")})}}}});$(".map.mobile.uninit").each(function(c,d){var b=L.map($(d).attr("id")).setView([parseFloat($(d).data("lat")),parseFloat($(d).data("lng"))],16);var e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(b);$(d).removeClass("uninit")})}function getFilterBiens(){var a={};a.type=[];$("#filters .filter_type.active").each(function(b,c){a.type.push($(c).data("id"))});a.superficie_min=$("#superficie_min").val();a.superficie_max=$("#superficie_max").val();a.localisation=$("#localisation").val();return a}function filterBiens(){$("#main").stop().animate({opacity:0},fadeTime,function(){$.get($("#filters").data("url"),getFilterBiens(),function(a){$("#main").html(a).animate({opacity:1},fadeTime);$(".scrollbar").scrollbar({})})})}function resetFilterBiens(){$('#filters .filter_type, #filters .filter a[href="#frm_superficie"]').removeClass("active selected");$("#superficie_min").val($("#frm_superficie .rangeslider").data("min")).trigger("input");$("#superficie_max").val($("#frm_superficie .rangeslider").data("max")).trigger("input");$("#localisation").selectpicker("deselectAll")}$(function(){$("body").on("focus",".nofocus",function(){$(this).blur()});$("body").on("submit",".form-ajax",function(c){c.preventDefault();$frm=$(this);$('button[type="submit"]',$frm[0]).prop("disabled",true);$.ajax({type:$frm[0].method,url:$frm[0].action,dataType:"json",data:$frm.serialize()}).done(function(d){if(d.success==1){$frm[0].reset()}$(".frm_zone_message",$frm[0]).html(d.response);$('button[type="submit"]',$frm[0]).prop("disabled",false)})});$("#main_menu li a[data-url], #header .logo a, #footer a").click(function(d){var c=$(this);if($('#main > .page[data-url="'+c.data("url")+'"]').length){d.preventDefault();$("body, html").animate({scrollTop:$('#main > .page[data-url="'+c.data("url")+'"]').position().top},scrollTime);$("#main_menu").removeClass("active")}else{$("#main").stop().animate({opacity:0},fadeTime,function(){$.get(c.attr("href"),function(e){$("#main").html(e).animate({opacity:1},fadeTime);initContent($("#main > .page")[0]);loadPages()})})}changeUrl(c.attr("href"))});$("body").on("click",".slider-nav-types a",function(d){d.preventDefault();var c=$(this);resetFilterBiens();$("#main").stop().animate({opacity:0},fadeTime,function(){$('#filters .filter_type[data-id="'+c.data("id")+'"]').addClass("active");$.get(c.attr("href"),function(e){$("#main").html(e).animate({opacity:1},fadeTime);initContent($("#main > .page")[0]);loadPages()})})});$("body").on("click","[data-goto]",function(d){d.preventDefault();var c=$(this);$(c.parents(".owl-carousel").get(0)).trigger("to.owl.carousel",[c.data("goto"),300])});$("body").on("click","[data-gotonav]",function(d){d.preventDefault();var c=$(this);$(c.parent().parent().find(".owl-carousel").get(0)).trigger("to.owl.carousel",[c.data("gotonav"),300]);c.parent().find("a.active").removeClass("active");c.addClass("active")});$("body").on("click",".page-outils .owl-carousel .owl-prev",function(g){var f=$(".page-outils .slider-nav a").get().length;var d=$(".page-outils .slider-nav a").index($(".page-outils .slider-nav a.active").get(0));var c=d-1;if(c<0){c=f-1}$(".page-outils .slider-nav a.active").removeClass("active");$(".page-outils .slider-nav a:eq("+c+")").addClass("active")});$("body").on("click",".page-outils .owl-carousel .owl-next",function(g){var f=$(".page-outils .slider-nav a").get().length;var d=$(".page-outils .slider-nav a").index($(".page-outils .slider-nav a.active").get(0));var c=d+1;if(c>=f){c=0}$(".page-outils .slider-nav a.active").removeClass("active");$(".page-outils .slider-nav a:eq("+c+")").addClass("active")});$("body").on("change.owl.carousel",".page-contact .owl-carousel.owl-carousel-parent",function(c){$(".page-contact .map.desktop.uninit[data-lat][data-lng]").each(function(d,e){mymap2=L.map($(e).attr("id")).setView([parseFloat($(e).data("lat")),parseFloat($(e).data("lng"))],16);var f=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(mymap2);$(e).removeClass("uninit")});$(".page-contact .map.desktop[data-lat][data-lng]").each(function(d,e){mymap2.invalidateSize()})});$("#header .trigger_menu").click(function(){$("#main_menu").addClass("active")});$("#main_menu .close").click(function(){$("#main_menu").removeClass("active")});$("#header .trigger_filters").click(function(){if($("#filters").is(".active")){$("#frm_superficie").collapse("hide")}$("#filters").toggleClass("active")});$(document).click(function(c){if(!$(c.target).parents("#frm_superficie").length){$("#frm_superficie").collapse("hide")}});$('#filters a[href="#frm_superficie"]').click(function(){$(this).toggleClass("active")});$("#frm_superficie .rangeslider").ionRangeSlider({onStart:a,onChange:a,onFinish:function(c){filterBiens();if(c.from!=c.min||c.to!=c.max){$('#filters a[href="#frm_superficie"]').addClass("selected")}else{$('#filters a[href="#frm_superficie"]').removeClass("selected")}}});superficie_instance=$("#frm_superficie .rangeslider").data("ionRangeSlider");function a(c){$("#superficie_min").prop("value",c.from);$("#superficie_max").prop("value",c.to)}$("#superficie_min").on("input",function(){var d=$(this).prop("value");var c=parseFloat($("#frm_superficie .rangeslider").data("min"));var e=parseFloat($("#frm_superficie .rangeslider").data("to"));if(d<c){d=c}else{if(d>e){d=e}}superficie_instance.update({from:d})});$("#superficie_max").on("input",function(){var d=$(this).prop("value");var c=parseFloat($("#frm_superficie .rangeslider").data("max"));var e=parseFloat($("#frm_superficie .rangeslider").data("from"));if(d<e){d=e}else{if(d>c){d=c}}superficie_instance.update({to:d})});$("#localisation").change(function(){filterBiens()});$("body").on("click",".all_biens a",function(d){d.preventDefault();var c=$(this);$("#main").stop().animate({opacity:0},fadeTime,function(){resetFilterBiens();$.get(c.attr("href"),function(e){$("#main").html(e).animate({opacity:1},fadeTime);initContent($("#main > .page")[0]);changeUrl(c.attr("href"))})})});$("body").on("click","a.link_bien",function(d){d.preventDefault();var c=$(this);$("#main").stop().animate({opacity:0},fadeTime,function(){$.get(c.attr("href"),function(f){$("#main").html(f).animate({opacity:1},fadeTime);initContent($("#main > .page")[0]);changeUrl(c.attr("href"));var e=$(".owl-carousel-video");e.on("translate.owl.carousel",function(g){$(".owl-item video").each(function(){$(this).get(0).pause()})});e.on("translated.owl.carousel",function(g){$(".owl-item.active video").get(0).play()});$(".video-item").each(function(){var g=$(".video-item").data("videosrc");if((g!=undefined)&&(g!=false)){var h=$(this).data("videosrc");$(this).prepend('<video playsinline controls width= "100%" height="100%" style="object-fit:fill;"><source src="'+h+'" type="video/mp4"></video>')}});$(".owl-item.active video").attr("loop",true)})})});var b=$(".owl-carousel-video");b.on("translate.owl.carousel",function(c){$(".owl-item video").each(function(){$(this).get(0).pause()})});b.on("translated.owl.carousel",function(c){$(".owl-item.active video").get(0).play()});$(".video-item").each(function(){var c=$(".video-item").data("videosrc");if((c!=undefined)&&(c!=false)){var d=$(this).data("videosrc");$(this).prepend('<video muted playsinline controls width= "100%" height="100%" style="object-fit:fill;"><source src="'+d+'" type="video/mp4"></video>')}});$(".owl-item.active video").attr("loop",true);$("body").on("click",".list_biens_page a",function(d){d.preventDefault();var c=$(this);$.get(c.attr("href"),function(f){var e=$(f);$("#all_biens .list-biens").append($("#all_biens .list-biens",e).html());$(".page_bottom").html($(".page_bottom",e).html());changeUrl(c.attr("href"))})});$("body").on("click",".page_bottom span.scroll",function(){var c=$($(this).parents(".page")[0]);if(c.is(".page-contact")){$("body, html").animate({scrollTop:0},scrollTime)}else{$("body, html").animate({scrollTop:c.position().top+$(window).height()},scrollTime)}});$("#filters .filter_type").click(function(c){c.preventDefault();$(this).toggleClass("active");filterBiens()});initContent($("#main > .page")[0]);loadPages()});$(window).on("load",function(){});